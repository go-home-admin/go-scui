"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[9798],{21245:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var o=n(58222);const l=(0,o.createElementVNode)("div",{style:{height:"500px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",color:"#999"}}," 试试看在上下左右四个角落右键，看看边缘位置修正效果 ",-1);function i(e,t,n,i,a,c){const r=(0,o.resolveComponent)("el-alert"),s=(0,o.resolveComponent)("el-empty"),d=(0,o.resolveComponent)("el-table-column"),m=(0,o.resolveComponent)("el-table"),u=(0,o.resolveComponent)("el-card"),h=(0,o.resolveComponent)("el-col"),f=(0,o.resolveComponent)("el-row"),p=(0,o.resolveComponent)("el-main"),C=(0,o.resolveComponent)("sc-contextmenu-item"),x=(0,o.resolveComponent)("sc-contextmenu");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(p,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{gutter:15},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{lg:12},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{shadow:"never"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,{title:"试试右键表格行看看. 支持多级菜单, 动态菜单等等等...",type:"success",style:{"margin-bottom":"20px"}}),(0,o.createVNode)(m,{ref:"table",data:a.tableData,"highlight-current-row":"",onRowContextmenu:c.rowContextmenu},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{type:"expand"},{default:(0,o.withCtx)((e=>[(0,o.createVNode)(s,{description:e.row.id+" 自定义扩展行","image-size":60},null,8,["description"])])),_:1}),(0,o.createVNode)(d,{prop:"id",label:"ID",width:"50"}),(0,o.createVNode)(d,{prop:"name",label:"NAME",width:"220"}),(0,o.createVNode)(d,{prop:"date",label:"DATE"}),(0,o.createVNode)(d,{prop:"state",label:"STATE"})])),_:1},8,["data","onRowContextmenu"])])),_:1})])),_:1}),(0,o.createVNode)(h,{lg:12},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{shadow:"never",onContextmenu:(0,o.withModifiers)(c.openMenu,["prevent"])},{default:(0,o.withCtx)((()=>[l])),_:1},8,["onContextmenu"])])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(x,{ref:"contextmenu",onCommand:c.handleCommand,onVisibleChange:c.visibleChange},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{command:"a",title:"返回(B)",suffix:"Alt+←"}),(0,o.createVNode)(C,{command:"b",title:"重新加载(R)",suffix:"Ctrl+R",icon:"el-icon-refresh"}),(0,o.createVNode)(C,{title:"切换兼容性模式",divided:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{command:"c1",title:"二级菜单1"}),(0,o.createVNode)(C,{title:"二级菜单2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{command:"c2-1",title:"三级菜单1"}),(0,o.createVNode)(C,{command:"c2-2",title:"三级菜单2"}),(0,o.createVNode)(C,{command:"c2-3",title:"三级菜单3"})])),_:1}),(0,o.createVNode)(C,{command:"c3",title:"二级菜单3"})])),_:1}),(0,o.createVNode)(C,{command:"d",title:"属性(P)",divided:"",disabled:a.row&&0==a.row.state},null,8,["disabled"]),a.row&&0==a.row.state?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,command:"e",title:"设置state=1"})):(0,o.createCommentVNode)("",!0)])),_:1},8,["onCommand","onVisibleChange"])],64)}const a={class:"sc-contextmenu__menu"};function c(e,t,n,l,i,c){return(0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:"el-zoom-in-top"},{default:(0,o.withCtx)((()=>[i.visible?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,ref:"contextmenu",class:"sc-contextmenu",style:(0,o.normalizeStyle)({left:i.left+"px",top:i.top+"px"}),onContextmenu:t[0]||(t[0]=(0,o.withModifiers)(((...e)=>c.fun&&c.fun(...e)),["prevent"]))},[(0,o.createElementVNode)("ul",a,[(0,o.renderSlot)(e.$slots,"default")])],36)):(0,o.createCommentVNode)("",!0)])),_:3})}var r={provide(){return{menuClick:this.menuClick}},data(){return{visible:!1,top:0,left:0}},watch:{visible(e){e?document.body.addEventListener("click",this.cm,!0):document.body.removeEventListener("click",this.cm,!0)}},mounted(){},methods:{cm(e){let t=this.$refs.contextmenu;t&&!t.contains(e.target)&&this.closeMenu()},menuClick(e){this.closeMenu(),this.$emit("command",e)},openMenu(e){e.preventDefault(),this.visible=!0,this.left=e.clientX+1,this.top=e.clientY+1,this.$nextTick((()=>{var t=e.clientX+1,n=e.clientY+1,o=window.innerWidth,l=window.innerHeight,i=this.$refs.contextmenu.offsetHeight,a=this.$refs.contextmenu.offsetWidth;this.left=t+a>o?o-a:t,this.top=n+i>l?n-i:n})),this.$emit("visibleChange",!0)},closeMenu(){this.visible=!1,this.$emit("visibleChange",!1)},fun(){return!1}}},s=n(83744);const d=(0,s.Z)(r,[["render",c]]);var m=d;const u={key:0},h={class:"title"},f={class:"sc-contextmenu__suffix"},p={key:0,class:"sc-contextmenu__menu"};function C(e,t,n,l,i,a){const c=(0,o.resolveComponent)("el-icon"),r=(0,o.resolveComponent)("el-icon-arrow-right");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[n.divided?((0,o.openBlock)(),(0,o.createElementBlock)("hr",u)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("li",{class:(0,o.normalizeClass)(n.disabled?"disabled":""),onClick:t[0]||(t[0]=(0,o.withModifiers)(((...e)=>a.liClick&&a.liClick(...e)),["stop"])),onMouseenter:t[1]||(t[1]=e=>a.openSubmenu(e)),onMouseleave:t[2]||(t[2]=e=>a.closeSubmenu(e))},[(0,o.createElementVNode)("span",h,[(0,o.createVNode)(c,{class:"sc-contextmenu__icon"},{default:(0,o.withCtx)((()=>[n.icon?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(n.icon),{key:0})):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(n.title),1)]),(0,o.createElementVNode)("span",f,[e.$slots.default?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r)])),_:1})):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)((0,o.toDisplayString)(n.suffix),1)],64))]),e.$slots.default?((0,o.openBlock)(),(0,o.createElementBlock)("ul",p,[(0,o.renderSlot)(e.$slots,"default")])):(0,o.createCommentVNode)("",!0)],34)],64)}var x={props:{command:{type:String,default:""},title:{type:String,default:""},suffix:{type:String,default:""},icon:{type:String,default:""},divided:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},inject:["menuClick"],methods:{liClick(){return!this.$slots.default&&(!this.disabled&&void this.menuClick(this.command))},openSubmenu(e){var t=e.target.querySelector("ul");if(!t)return!1;t.style.display="inline-block";var n=t.getBoundingClientRect(),o=n.left,l=n.top,i=window.innerWidth,a=window.innerHeight,c=t.offsetHeight,r=t.offsetWidth;o+r>i&&(t.style.left="auto",t.style.right="100%"),l+c>a&&(t.style.top="auto",t.style.bottom="0")},closeSubmenu(e){var t=e.target.querySelector("ul");if(!t)return!1;t.removeAttribute("style"),t.style.display="none"}}};const w=(0,s.Z)(x,[["render",C]]);var v=w,k={name:"contextmenu",components:{scContextmenu:m,scContextmenuItem:v},data(){return{row:null,tableData:[{id:"1",name:"Sakuya",date:"2021-10-10",state:1},{id:"2",name:"Lolowan(此行右键属性禁用)",date:"2021-10-09",state:0},{id:"3",name:"Ali",date:"2021-10-08",state:1}]}},mounted(){},methods:{rowContextmenu(e,t,n){this.row=e,this.$refs.table.setCurrentRow(e),this.$refs.contextmenu.openMenu(n)},openMenu(e){this.row=null,this.$refs.contextmenu.openMenu(e)},handleCommand(e){this.$message("click on item "+e),"e"==e&&(this.row.state=1)},visibleChange(e){e||this.$refs.table.setCurrentRow()}}};const b=(0,s.Z)(k,[["render",i]]);var V=b}}]);