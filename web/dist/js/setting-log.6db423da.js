"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[5840,511],{28518:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var o=l(58222);const a={class:"left-panel"},r=(0,o.createElementVNode)("div",{class:"right-panel"},null,-1);function n(e,t,l,n,d,c){const i=(0,o.resolveComponent)("el-tree"),p=(0,o.resolveComponent)("el-aside"),s=(0,o.resolveComponent)("el-date-picker"),h=(0,o.resolveComponent)("el-header"),u=(0,o.resolveComponent)("scEcharts"),f=(0,o.resolveComponent)("el-icon-circle-close-filled"),C=(0,o.resolveComponent)("el-icon"),w=(0,o.resolveComponent)("el-icon-warning-filled"),m=(0,o.resolveComponent)("el-icon-info-filled"),b=(0,o.resolveComponent)("el-table-column"),V=(0,o.resolveComponent)("scTable"),x=(0,o.resolveComponent)("el-main"),N=(0,o.resolveComponent)("el-container"),g=(0,o.resolveComponent)("info"),k=(0,o.resolveComponent)("el-drawer");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(N,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{width:"220px"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{ref:"category",class:"menu","node-key":"label",data:d.category,"default-expanded-keys":["系统日志"],"current-node-key":"系统日志","highlight-current":!0,"expand-on-click-node":!1},null,8,["data"])])),_:1}),(0,o.createVNode)(N,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(x,{class:"nopadding"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",a,[(0,o.createVNode)(s,{modelValue:d.date,"onUpdate:modelValue":t[0]||(t[0]=e=>d.date=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),r])),_:1}),(0,o.createVNode)(h,{style:{height:"150px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{height:"100%",option:d.logsChartOption},null,8,["option"])])),_:1}),(0,o.createVNode)(x,{class:"nopadding"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(V,{ref:"table",apiObj:d.apiObj,stripe:"",highlightCurrentRow:"",onRowClick:c.rowClick},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{label:"级别",prop:"level",width:"60"},{default:(0,o.withCtx)((e=>["error"==e.row.level?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,style:{color:"#F56C6C"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f)])),_:1})):(0,o.createCommentVNode)("",!0),"warn"==e.row.level?((0,o.openBlock)(),(0,o.createBlock)(C,{key:1,style:{color:"#E6A23C"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w)])),_:1})):(0,o.createCommentVNode)("",!0),"info"==e.row.level?((0,o.openBlock)(),(0,o.createBlock)(C,{key:2,style:{color:"#409EFF"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m)])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(b,{label:"ID",prop:"id",width:"180"}),(0,o.createVNode)(b,{label:"日志名",prop:"name",width:"150"}),(0,o.createVNode)(b,{label:"请求接口",prop:"url",width:"150"}),(0,o.createVNode)(b,{label:"请求方法",prop:"type",width:"150"}),(0,o.createVNode)(b,{label:"用户",prop:"user",width:"150"}),(0,o.createVNode)(b,{label:"客户端IP",prop:"cip",width:"150"}),(0,o.createVNode)(b,{label:"日志时间",prop:"time",width:"170"})])),_:1},8,["apiObj","onRowClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(k,{modelValue:d.infoDrawer,"onUpdate:modelValue":t[1]||(t[1]=e=>d.infoDrawer=e),title:"日志详情",size:600,"destroy-on-close":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{ref:"info"},null,512)])),_:1},8,["modelValue"])],64)}var d=l(97515),c=l(47537),i={name:"log",components:{info:d["default"],scEcharts:c.Z},data(){return{infoDrawer:!1,logsChartOption:{color:["#409eff","#e6a23c","#f56c6c"],grid:{top:"0px",left:"10px",right:"10px",bottom:"0px"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:["2021-07-01","2021-07-02","2021-07-03","2021-07-04","2021-07-05","2021-07-06","2021-07-07","2021-07-08","2021-07-09","2021-07-10","2021-07-11","2021-07-12","2021-07-13","2021-07-14","2021-07-15"]},yAxis:{show:!1,type:"value"},series:[{data:[120,200,150,80,70,110,130,120,200,150,80,70,110,130,70,110],type:"bar",stack:"log",barWidth:"15px"},{data:[15,26,7,12,13,9,21,15,26,7,12,13,9,21,12,3],type:"bar",stack:"log",barWidth:"15px"},{data:[0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0],type:"bar",stack:"log",barWidth:"15px"}]},category:[{label:"系统日志",children:[{label:"debug"},{label:"info"},{label:"warn"},{label:"error"},{label:"fatal"}]},{label:"应用日志",children:[{label:"selfHelp"},{label:"WechatApp"}]}],date:[],apiObj:this.$API.system.log.list,search:{keyword:""}}},methods:{upsearch(){},rowClick(e){this.infoDrawer=!0,this.$nextTick((()=>{this.$refs.info.setData(e)}))}}},p=l(83744);const s=(0,p.Z)(i,[["render",n]]);var h=s}}]);