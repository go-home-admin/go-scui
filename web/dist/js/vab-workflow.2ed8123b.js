"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1292],{33696:function(e,o,t){t.r(o),t.d(o,{default:function(){return Fo}});var l=t(58222);const d={class:"do"},n=(0,l.createTextVNode)("export JSON");function a(e,o,t,a,r,i){const s=(0,l.resolveComponent)("el-page-header"),c=(0,l.resolveComponent)("el-button"),m=(0,l.resolveComponent)("el-header"),p=(0,l.resolveComponent)("sc-workflow"),u=(0,l.resolveComponent)("el-main"),h=(0,l.resolveComponent)("el-container");return(0,l.openBlock)(),(0,l.createBlock)(h,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{content:r.data.name},null,8,["content"]),(0,l.createElementVNode)("div",d,[(0,l.createVNode)(c,{type:"primary",onClick:i.exportJson},{default:(0,l.withCtx)((()=>[n])),_:1},8,["onClick"])])])),_:1}),(0,l.createVNode)(u,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(p,{modelValue:r.data.nodeConfig,"onUpdate:modelValue":o[0]||(o[0]=e=>r.data.nodeConfig=e)},null,8,["modelValue"])])),_:1})])),_:1})}const r={class:"sc-workflow-design"},i={class:"box-scale"},s=(0,l.createElementVNode)("div",{class:"end-node"},[(0,l.createElementVNode)("div",{class:"end-node-circle"}),(0,l.createElementVNode)("div",{class:"end-node-text"},"流程结束")],-1);function c(e,o,t,d,n,a){const c=(0,l.resolveComponent)("node-wrap"),m=(0,l.resolveComponent)("use-select");return(0,l.openBlock)(),(0,l.createElementBlock)("div",r,[(0,l.createElementVNode)("div",i,[n.nodeConfig?((0,l.openBlock)(),(0,l.createBlock)(c,{key:0,modelValue:n.nodeConfig,"onUpdate:modelValue":o[0]||(o[0]=e=>n.nodeConfig=e)},null,8,["modelValue"])):(0,l.createCommentVNode)("",!0),s]),n.selectVisible?((0,l.openBlock)(),(0,l.createBlock)(m,{key:0,ref:"useselect",onClosed:o[1]||(o[1]=e=>n.selectVisible=!1)},null,512)):(0,l.createCommentVNode)("",!0)])}function m(e,o,t,d,n,a){const r=(0,l.resolveComponent)("promoter"),i=(0,l.resolveComponent)("approver"),s=(0,l.resolveComponent)("send"),c=(0,l.resolveComponent)("node-wrap",!0),m=(0,l.resolveComponent)("branch");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[0==n.nodeConfig.type?((0,l.openBlock)(),(0,l.createBlock)(r,{key:0,modelValue:n.nodeConfig,"onUpdate:modelValue":o[0]||(o[0]=e=>n.nodeConfig=e)},null,8,["modelValue"])):(0,l.createCommentVNode)("",!0),1==n.nodeConfig.type?((0,l.openBlock)(),(0,l.createBlock)(i,{key:1,modelValue:n.nodeConfig,"onUpdate:modelValue":o[1]||(o[1]=e=>n.nodeConfig=e)},null,8,["modelValue"])):(0,l.createCommentVNode)("",!0),2==n.nodeConfig.type?((0,l.openBlock)(),(0,l.createBlock)(s,{key:2,modelValue:n.nodeConfig,"onUpdate:modelValue":o[2]||(o[2]=e=>n.nodeConfig=e)},null,8,["modelValue"])):(0,l.createCommentVNode)("",!0),4==n.nodeConfig.type?((0,l.openBlock)(),(0,l.createBlock)(m,{key:3,modelValue:n.nodeConfig,"onUpdate:modelValue":o[3]||(o[3]=e=>n.nodeConfig=e)},{default:(0,l.withCtx)((e=>[e.node?((0,l.openBlock)(),(0,l.createBlock)(c,{key:0,modelValue:e.node.childNode,"onUpdate:modelValue":o=>e.node.childNode=o},null,8,["modelValue","onUpdate:modelValue"])):(0,l.createCommentVNode)("",!0)])),_:1},8,["modelValue"])):(0,l.createCommentVNode)("",!0),n.nodeConfig.childNode?((0,l.openBlock)(),(0,l.createBlock)(c,{key:4,modelValue:n.nodeConfig.childNode,"onUpdate:modelValue":o[4]||(o[4]=e=>n.nodeConfig.childNode=e)},null,8,["modelValue"])):(0,l.createCommentVNode)("",!0)],64)}const p={class:"node-wrap"},u={class:"title",style:{background:"#ff943e"}},h={class:"content"},V={key:0},C={key:1,class:"placeholder"},N={class:"node-wrap-drawer__title"},f=(0,l.createTextVNode)("选择人员"),k={class:"tags-list"},g=(0,l.createTextVNode)(" 发起人的第 "),v=(0,l.createTextVNode)(" 级主管 "),w=(0,l.createTextVNode)("选择角色"),y={class:"tags-list"},x=(0,l.createTextVNode)("自选一个人"),_=(0,l.createTextVNode)("自选多个人"),b=(0,l.createTextVNode)("直到最上层主管"),T=(0,l.createTextVNode)("自定义审批终点"),B={key:0},E=(0,l.createTextVNode)("直到发起人的第 "),U=(0,l.createTextVNode)(" 级主管"),L=(0,l.createTextVNode)(" 小时 "),S=(0,l.createTextVNode)("自动通过"),D=(0,l.createTextVNode)("自动拒绝"),M={style:{width:"100%"}},$=(0,l.createTextVNode)("按顺序依次审批"),O={style:{width:"100%"}},R=(0,l.createTextVNode)("会签 (可同时审批，每个人必须审批通过)"),j={style:{width:"100%"}},P=(0,l.createTextVNode)("或签 (有一人审批通过即可)"),z=(0,l.createTextVNode)("保存"),F=(0,l.createTextVNode)("取消");function I(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-icon-user-filled"),i=(0,l.resolveComponent)("el-icon"),s=(0,l.resolveComponent)("el-icon-close"),c=(0,l.resolveComponent)("add-node"),m=(0,l.resolveComponent)("el-icon-edit"),I=(0,l.resolveComponent)("el-input"),K=(0,l.resolveComponent)("el-option"),J=(0,l.resolveComponent)("el-select"),Z=(0,l.resolveComponent)("el-form-item"),G=(0,l.resolveComponent)("el-button"),H=(0,l.resolveComponent)("el-tag"),A=(0,l.resolveComponent)("el-input-number"),q=(0,l.resolveComponent)("el-radio"),W=(0,l.resolveComponent)("el-radio-group"),Q=(0,l.resolveComponent)("el-divider"),X=(0,l.resolveComponent)("el-checkbox"),Y=(0,l.resolveComponent)("el-form"),ee=(0,l.resolveComponent)("el-main"),oe=(0,l.resolveComponent)("el-footer"),te=(0,l.resolveComponent)("el-container"),le=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createElementVNode)("div",{class:"node-wrap-box",onClick:o[1]||(o[1]=(...e)=>a.show&&a.show(...e))},[(0,l.createElementVNode)("div",u,[(0,l.createVNode)(i,{class:"icon"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r)])),_:1}),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.nodeConfig.nodeName),1),(0,l.createVNode)(i,{class:"close",onClick:o[0]||(o[0]=(0,l.withModifiers)((e=>a.delNode()),["stop"]))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s)])),_:1})]),(0,l.createElementVNode)("div",h,[a.toText(n.nodeConfig)?((0,l.openBlock)(),(0,l.createElementBlock)("span",V,(0,l.toDisplayString)(a.toText(n.nodeConfig)),1)):((0,l.openBlock)(),(0,l.createElementBlock)("span",C,"请选择"))])]),(0,l.createVNode)(c,{modelValue:n.nodeConfig.childNode,"onUpdate:modelValue":o[2]||(o[2]=e=>n.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,l.createVNode)(le,{title:"审批人设置",modelValue:n.drawer,"onUpdate:modelValue":o[17]||(o[17]=e=>n.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",N,[n.isEditTitle?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("label",{key:0,onClick:o[3]||(o[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,l.createTextVNode)((0,l.toDisplayString)(n.form.nodeName),1),(0,l.createVNode)(i,{class:"node-wrap-drawer__title-edit"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m)])),_:1})])),n.isEditTitle?((0,l.openBlock)(),(0,l.createBlock)(I,{key:1,ref:"nodeTitle",modelValue:n.form.nodeName,"onUpdate:modelValue":o[4]||(o[4]=e=>n.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,l.withKeys)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,l.createCommentVNode)("",!0)])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(te,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(ee,{style:{padding:"0 20px 20px 20px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(Y,{"label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(Z,{label:"审批人员类型"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(J,{modelValue:n.form.setType,"onUpdate:modelValue":o[5]||(o[5]=e=>n.form.setType=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(K,{value:1,label:"指定成员"}),(0,l.createVNode)(K,{value:2,label:"主管"}),(0,l.createVNode)(K,{value:3,label:"角色"}),(0,l.createVNode)(K,{value:4,label:"发起人自选"}),(0,l.createVNode)(K,{value:5,label:"发起人自己"}),(0,l.createVNode)(K,{value:7,label:"连续多级主管"})])),_:1},8,["modelValue"])])),_:1}),1==n.form.setType?((0,l.openBlock)(),(0,l.createBlock)(Z,{key:0,label:"选择成员"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(G,{type:"primary",icon:"el-icon-plus",round:"",onClick:o[6]||(o[6]=e=>a.selectHandle(1,n.form.nodeUserList))},{default:(0,l.withCtx)((()=>[f])),_:1}),(0,l.createElementVNode)("div",k,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.form.nodeUserList,((e,o)=>((0,l.openBlock)(),(0,l.createBlock)(H,{key:e.id,closable:"",onClose:e=>a.delUser(o)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,l.createCommentVNode)("",!0),2==n.form.setType?((0,l.openBlock)(),(0,l.createBlock)(Z,{key:1,label:"指定主管"},{default:(0,l.withCtx)((()=>[g,(0,l.createVNode)(A,{modelValue:n.form.examineLevel,"onUpdate:modelValue":o[7]||(o[7]=e=>n.form.examineLevel=e),min:1},null,8,["modelValue"]),v])),_:1})):(0,l.createCommentVNode)("",!0),3==n.form.setType?((0,l.openBlock)(),(0,l.createBlock)(Z,{key:2,label:"选择角色"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(G,{type:"primary",icon:"el-icon-plus",round:"",onClick:o[8]||(o[8]=e=>a.selectHandle(2,n.form.nodeRoleList))},{default:(0,l.withCtx)((()=>[w])),_:1}),(0,l.createElementVNode)("div",y,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.form.nodeRoleList,((e,o)=>((0,l.openBlock)(),(0,l.createBlock)(H,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(o)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,l.createCommentVNode)("",!0),4==n.form.setType?((0,l.openBlock)(),(0,l.createBlock)(Z,{key:3,label:"发起人自选"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(W,{modelValue:n.form.selectMode,"onUpdate:modelValue":o[9]||(o[9]=e=>n.form.selectMode=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(q,{label:1},{default:(0,l.withCtx)((()=>[x])),_:1}),(0,l.createVNode)(q,{label:2},{default:(0,l.withCtx)((()=>[_])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,l.createCommentVNode)("",!0),7==n.form.setType?((0,l.openBlock)(),(0,l.createBlock)(Z,{key:4,label:"连续主管审批终点"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(W,{modelValue:n.form.directorMode,"onUpdate:modelValue":o[10]||(o[10]=e=>n.form.directorMode=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(q,{label:0},{default:(0,l.withCtx)((()=>[b])),_:1}),(0,l.createVNode)(q,{label:1},{default:(0,l.withCtx)((()=>[T])),_:1})])),_:1},8,["modelValue"]),1==n.form.directorMode?((0,l.openBlock)(),(0,l.createElementBlock)("p",B,[E,(0,l.createVNode)(A,{modelValue:n.form.directorLevel,"onUpdate:modelValue":o[11]||(o[11]=e=>n.form.directorLevel=e),min:1},null,8,["modelValue"]),U])):(0,l.createCommentVNode)("",!0)])),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(Q),(0,l.createVNode)(Z,{label:""},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(X,{modelValue:n.form.termAuto,"onUpdate:modelValue":o[12]||(o[12]=e=>n.form.termAuto=e),label:"超时自动审批"},null,8,["modelValue"])])),_:1}),n.form.termAuto?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:5},[(0,l.createVNode)(Z,{label:"审批期限（为 0 则不生效）"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(A,{modelValue:n.form.term,"onUpdate:modelValue":o[13]||(o[13]=e=>n.form.term=e),min:0},null,8,["modelValue"]),L])),_:1}),(0,l.createVNode)(Z,{label:"审批期限超时后执行"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(W,{modelValue:n.form.termMode,"onUpdate:modelValue":o[14]||(o[14]=e=>n.form.termMode=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(q,{label:0},{default:(0,l.withCtx)((()=>[S])),_:1}),(0,l.createVNode)(q,{label:1},{default:(0,l.withCtx)((()=>[D])),_:1})])),_:1},8,["modelValue"])])),_:1})],64)):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(Q),(0,l.createVNode)(Z,{label:"多人审批时审批方式"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(W,{modelValue:n.form.examineMode,"onUpdate:modelValue":o[15]||(o[15]=e=>n.form.examineMode=e)},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("p",M,[(0,l.createVNode)(q,{label:1},{default:(0,l.withCtx)((()=>[$])),_:1})]),(0,l.createElementVNode)("p",O,[(0,l.createVNode)(q,{label:2},{default:(0,l.withCtx)((()=>[R])),_:1})]),(0,l.createElementVNode)("p",j,[(0,l.createVNode)(q,{label:3},{default:(0,l.withCtx)((()=>[P])),_:1})])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.createVNode)(oe,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(G,{type:"primary",onClick:a.save},{default:(0,l.withCtx)((()=>[z])),_:1},8,["onClick"]),(0,l.createVNode)(G,{onClick:o[16]||(o[16]=e=>n.drawer=!1)},{default:(0,l.withCtx)((()=>[F])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const K={class:"add-node-btn-box"},J={class:"add-node-btn"},Z={class:"add-node-popover-body"},G=(0,l.createElementVNode)("p",null,"审批节点",-1),H=(0,l.createElementVNode)("p",null,"抄送节点",-1),A=(0,l.createElementVNode)("p",null,"条件分支",-1);function q(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-button"),i=(0,l.resolveComponent)("el-icon-user-filled"),s=(0,l.resolveComponent)("el-icon"),c=(0,l.resolveComponent)("el-icon-promotion"),m=(0,l.resolveComponent)("el-icon-share"),p=(0,l.resolveComponent)("el-popover");return(0,l.openBlock)(),(0,l.createElementBlock)("div",K,[(0,l.createElementVNode)("div",J,[(0,l.createVNode)(p,{placement:"right-start",width:270,trigger:"click","hide-after":0,"show-after":0},{reference:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{type:"primary",icon:"el-icon-plus",circle:""})])),default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",Z,[(0,l.createElementVNode)("ul",null,[(0,l.createElementVNode)("li",null,[(0,l.createVNode)(s,{style:{color:"#ff943e"},onClick:o[0]||(o[0]=e=>a.addType(1))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(i)])),_:1}),G]),(0,l.createElementVNode)("li",null,[(0,l.createVNode)(s,{style:{color:"#3296fa"},onClick:o[1]||(o[1]=e=>a.addType(2))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c)])),_:1}),H]),(0,l.createElementVNode)("li",null,[(0,l.createVNode)(s,{style:{color:"#15BC83"},onClick:o[2]||(o[2]=e=>a.addType(4))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m)])),_:1}),A])])])])),_:1})])])}var W={props:{modelValue:{type:Object,default:()=>{}}},data(){return{}},mounted(){},methods:{addType(e){var o={};1==e?o={nodeName:"审核人",type:1,setType:1,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0,childNode:this.modelValue}:2==e?o={nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[],childNode:this.modelValue}:4==e&&(o={nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"条件1",type:3,priorityLevel:1,conditionMode:1,conditionList:[]},{nodeName:"条件2",type:3,priorityLevel:2,conditionMode:1,conditionList:[]}],childNode:this.modelValue}),this.$emit("update:modelValue",o)}}},Q=t(83744);const X=(0,Q.Z)(W,[["render",q]]);var Y=X,ee={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:Y},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},delRole(e){this.form.nodeRoleList.splice(e,1)},selectHandle(e,o){this.select(e,o)},toText(e){if(1==e.setType){if(e.nodeUserList&&e.nodeUserList.length>0){const o=e.nodeUserList.map((e=>e.name)).join("、");return o}return!1}if(2==e.setType)return 1==e.examineLevel?"直接主管":`发起人的第${e.examineLevel}级主管`;if(3==e.setType){if(e.nodeRoleList&&e.nodeRoleList.length>0){const o=e.nodeRoleList.map((e=>e.name)).join("、");return"角色-"+o}return!1}return 4==e.setType?"发起人自选":5==e.setType?"发起人自己":7==e.setType?"连续多级主管":void 0}}};const oe=(0,Q.Z)(ee,[["render",I]]);var te=oe;const le={class:"node-wrap"},de={class:"title",style:{background:"#576a95"}},ne={class:"content"},ae={class:"node-wrap-drawer__title"},re=(0,l.createTextVNode)("选择角色"),ie={class:"tags-list"},se=(0,l.createTextVNode)("保存"),ce=(0,l.createTextVNode)("取消");function me(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-icon-user-filled"),i=(0,l.resolveComponent)("el-icon"),s=(0,l.resolveComponent)("add-node"),c=(0,l.resolveComponent)("el-icon-edit"),m=(0,l.resolveComponent)("el-input"),p=(0,l.resolveComponent)("el-button"),u=(0,l.resolveComponent)("el-tag"),h=(0,l.resolveComponent)("el-form-item"),V=(0,l.resolveComponent)("el-alert"),C=(0,l.resolveComponent)("el-form"),N=(0,l.resolveComponent)("el-main"),f=(0,l.resolveComponent)("el-footer"),k=(0,l.resolveComponent)("el-container"),g=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createElementBlock)("div",le,[(0,l.createElementVNode)("div",{class:"node-wrap-box start-node",onClick:o[0]||(o[0]=(...e)=>a.show&&a.show(...e))},[(0,l.createElementVNode)("div",de,[(0,l.createVNode)(i,{class:"icon"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r)])),_:1}),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.nodeConfig.nodeName),1)]),(0,l.createElementVNode)("div",ne,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(a.toText(n.nodeConfig)),1)])]),(0,l.createVNode)(s,{modelValue:n.nodeConfig.childNode,"onUpdate:modelValue":o[1]||(o[1]=e=>n.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,l.createVNode)(g,{title:"发起人",modelValue:n.drawer,"onUpdate:modelValue":o[6]||(o[6]=e=>n.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",ae,[n.isEditTitle?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("label",{key:0,onClick:o[2]||(o[2]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,l.createTextVNode)((0,l.toDisplayString)(n.form.nodeName),1),(0,l.createVNode)(i,{class:"node-wrap-drawer__title-edit"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c)])),_:1})])),n.isEditTitle?((0,l.openBlock)(),(0,l.createBlock)(m,{key:1,ref:"nodeTitle",modelValue:n.form.nodeName,"onUpdate:modelValue":o[3]||(o[3]=e=>n.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,l.withKeys)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,l.createCommentVNode)("",!0)])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(k,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(N,{style:{padding:"0 20px 20px 20px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{"label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(h,{label:"谁可以发起此审批"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(p,{type:"primary",icon:"el-icon-plus",round:"",onClick:o[4]||(o[4]=e=>a.selectHandle(2,n.form.nodeRoleList))},{default:(0,l.withCtx)((()=>[re])),_:1}),(0,l.createElementVNode)("div",ie,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.form.nodeRoleList,((e,o)=>((0,l.openBlock)(),(0,l.createBlock)(u,{key:e.id,type:"info",closable:"",onClose:e=>a.delRole(o)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),0==n.form.nodeRoleList.length?((0,l.openBlock)(),(0,l.createBlock)(V,{key:0,title:"不指定则默认所有人都可发起此审批",type:"info",closable:!1})):(0,l.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,l.createVNode)(f,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(p,{type:"primary",onClick:a.save},{default:(0,l.withCtx)((()=>[se])),_:1},8,["onClick"]),(0,l.createVNode)(p,{onClick:o[5]||(o[5]=e=>n.drawer=!1)},{default:(0,l.withCtx)((()=>[ce])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var pe={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:Y},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.isEditTitle=!1,this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},selectHandle(e,o){this.select(e,o)},delRole(e){this.form.nodeRoleList.splice(e,1)},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},toText(e){return e.nodeRoleList&&e.nodeRoleList.length>0?e.nodeRoleList.map((e=>e.name)).join("、"):"所有人"}}};const ue=(0,Q.Z)(pe,[["render",me]]);var he=ue;const Ve={class:"branch-wrap"},Ce={class:"branch-box-wrap"},Ne={class:"branch-box"},fe=(0,l.createTextVNode)("添加条件"),ke={class:"condition-node"},ge={class:"condition-node-box"},ve=["onClick"],we=["onClick"],ye={class:"title"},xe={class:"node-title"},_e={class:"priority-title"},be={class:"content"},Te={key:0},Be={key:1,class:"placeholder"},Ee=["onClick"],Ue={key:1,class:"top-left-cover-line"},Le={key:2,class:"bottom-left-cover-line"},Se={key:3,class:"top-right-cover-line"},De={key:4,class:"bottom-right-cover-line"},Me={class:"node-wrap-drawer__title"},$e=(0,l.createTextVNode)("且"),Oe=(0,l.createTextVNode)("或"),Re=(0,l.createTextVNode)("移除"),je=(0,l.createTextVNode)("增加条件"),Pe=(0,l.createTextVNode)("保存"),ze=(0,l.createTextVNode)("取消");function Fe(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-button"),i=(0,l.resolveComponent)("el-icon-arrow-left"),s=(0,l.resolveComponent)("el-icon"),c=(0,l.resolveComponent)("el-icon-close"),m=(0,l.resolveComponent)("el-icon-arrow-right"),p=(0,l.resolveComponent)("add-node"),u=(0,l.resolveComponent)("el-icon-edit"),h=(0,l.resolveComponent)("el-input"),V=(0,l.resolveComponent)("el-radio"),C=(0,l.resolveComponent)("el-radio-group"),N=(0,l.resolveComponent)("el-form-item"),f=(0,l.resolveComponent)("el-divider"),k=(0,l.resolveComponent)("el-table-column"),g=(0,l.resolveComponent)("el-option"),v=(0,l.resolveComponent)("el-select"),w=(0,l.resolveComponent)("el-link"),y=(0,l.resolveComponent)("el-table"),x=(0,l.resolveComponent)("el-form"),_=(0,l.resolveComponent)("el-main"),b=(0,l.resolveComponent)("el-footer"),T=(0,l.resolveComponent)("el-container"),B=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Ve,[(0,l.createElementVNode)("div",Ce,[(0,l.createElementVNode)("div",Ne,[(0,l.createVNode)(r,{class:"add-branch",type:"success",plain:"",round:"",onClick:a.addTerm},{default:(0,l.withCtx)((()=>[fe])),_:1},8,["onClick"]),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.nodeConfig.conditionNodes,((o,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"col-box",key:t},[(0,l.createElementVNode)("div",ke,[(0,l.createElementVNode)("div",ge,[(0,l.createElementVNode)("div",{class:"auto-judge",onClick:e=>a.show(t)},[0!=t?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"sort-left",onClick:(0,l.withModifiers)((e=>a.arrTransfer(t,-1)),["stop"])},[(0,l.createVNode)(s,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(i)])),_:1})],8,we)):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",ye,[(0,l.createElementVNode)("span",xe,(0,l.toDisplayString)(o.nodeName),1),(0,l.createElementVNode)("span",_e,"优先级"+(0,l.toDisplayString)(o.priorityLevel),1),(0,l.createVNode)(s,{class:"close",onClick:(0,l.withModifiers)((e=>a.delTerm(t)),["stop"])},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c)])),_:2},1032,["onClick"])]),(0,l.createElementVNode)("div",be,[a.toText(n.nodeConfig,t)?((0,l.openBlock)(),(0,l.createElementBlock)("span",Te,(0,l.toDisplayString)(a.toText(n.nodeConfig,t)),1)):((0,l.openBlock)(),(0,l.createElementBlock)("span",Be,"请设置条件"))]),t!=n.nodeConfig.conditionNodes.length-1?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:1,class:"sort-right",onClick:(0,l.withModifiers)((e=>a.arrTransfer(t)),["stop"])},[(0,l.createVNode)(s,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m)])),_:1})],8,Ee)):(0,l.createCommentVNode)("",!0)],8,ve),(0,l.createVNode)(p,{modelValue:o.childNode,"onUpdate:modelValue":e=>o.childNode=e},null,8,["modelValue","onUpdate:modelValue"])])]),o.childNode?(0,l.renderSlot)(e.$slots,"default",{key:0,node:o}):(0,l.createCommentVNode)("",!0),0==t?((0,l.openBlock)(),(0,l.createElementBlock)("div",Ue)):(0,l.createCommentVNode)("",!0),0==t?((0,l.openBlock)(),(0,l.createElementBlock)("div",Le)):(0,l.createCommentVNode)("",!0),t==n.nodeConfig.conditionNodes.length-1?((0,l.openBlock)(),(0,l.createElementBlock)("div",Se)):(0,l.createCommentVNode)("",!0),t==n.nodeConfig.conditionNodes.length-1?((0,l.openBlock)(),(0,l.createElementBlock)("div",De)):(0,l.createCommentVNode)("",!0)])))),128))]),(0,l.createVNode)(p,{modelValue:n.nodeConfig.childNode,"onUpdate:modelValue":o[0]||(o[0]=e=>n.nodeConfig.childNode=e)},null,8,["modelValue"])]),(0,l.createVNode)(B,{title:"条件设置",modelValue:n.drawer,"onUpdate:modelValue":o[5]||(o[5]=e=>n.drawer=e),"destroy-on-close":"","append-to-body":"",size:600},{header:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",Me,[n.isEditTitle?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("label",{key:0,onClick:o[1]||(o[1]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,l.createTextVNode)((0,l.toDisplayString)(n.form.nodeName),1),(0,l.createVNode)(s,{class:"node-wrap-drawer__title-edit"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u)])),_:1})])),n.isEditTitle?((0,l.openBlock)(),(0,l.createBlock)(h,{key:1,ref:"nodeTitle",modelValue:n.form.nodeName,"onUpdate:modelValue":o[2]||(o[2]=e=>n.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,l.withKeys)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,l.createCommentVNode)("",!0)])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(T,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(_,{style:{padding:"0 20px 20px 20px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{"label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(N,{label:"条件关系"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{modelValue:n.form.conditionMode,"onUpdate:modelValue":o[3]||(o[3]=e=>n.form.conditionMode=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(V,{label:1},{default:(0,l.withCtx)((()=>[$e])),_:1}),(0,l.createVNode)(V,{label:2},{default:(0,l.withCtx)((()=>[Oe])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(f),(0,l.createVNode)(N,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(y,{data:n.form.conditionList},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(k,{prop:"label",label:"描述"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(h,{modelValue:e.row.label,"onUpdate:modelValue":o=>e.row.label=o,placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.createVNode)(k,{prop:"field",label:"条件字段",width:"130"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(h,{modelValue:e.row.field,"onUpdate:modelValue":o=>e.row.field=o,placeholder:"条件字段"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.createVNode)(k,{prop:"operator",label:"运算符",width:"130"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(v,{modelValue:e.row.operator,"onUpdate:modelValue":o=>e.row.operator=o,placeholder:"Select"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(g,{label:"等于",value:"="}),(0,l.createVNode)(g,{label:"不等于",value:"!="}),(0,l.createVNode)(g,{label:"大于",value:">"}),(0,l.createVNode)(g,{label:"大于等于",value:">="}),(0,l.createVNode)(g,{label:"小于",value:"<"}),(0,l.createVNode)(g,{label:"小于等于",value:"<="}),(0,l.createVNode)(g,{label:"包含",value:"include"}),(0,l.createVNode)(g,{label:"不包含",value:"notinclude"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.createVNode)(k,{prop:"value",label:"值",width:"100"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(h,{modelValue:e.row.value,"onUpdate:modelValue":o=>e.row.value=o,placeholder:"值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.createVNode)(k,{prop:"value",label:"移除",width:"55"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(w,{type:"danger",underline:!1,onClick:o=>a.deleteConditionList(e.$index)},{default:(0,l.withCtx)((()=>[Re])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,l.createElementVNode)("p",null,[(0,l.createVNode)(r,{type:"primary",icon:"el-icon-plus",round:"",onClick:a.addConditionList},{default:(0,l.withCtx)((()=>[je])),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,l.createVNode)(b,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{type:"primary",onClick:a.save},{default:(0,l.withCtx)((()=>[Pe])),_:1},8,["onClick"]),(0,l.createVNode)(r,{onClick:o[4]||(o[4]=e=>n.drawer=!1)},{default:(0,l.withCtx)((()=>[ze])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Ie={props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:Y},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,index:0,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(e){this.index=e,this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig.conditionNodes[e])),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.nodeConfig.conditionNodes[this.index]=this.form,this.$emit("update:modelValue",this.nodeConfig),this.drawer=!1},addTerm(){let e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,priorityLevel:e,conditionMode:1,conditionList:[]})},delTerm(e){this.nodeConfig.conditionNodes.splice(e,1),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:modelValue",this.nodeConfig.conditionNodes[0].childNode))},reData(e,o){e.childNode?this.reData(e.childNode,o):e.childNode=o},arrTransfer(e,o=1){this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+o,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map(((e,o)=>{e.priorityLevel=o+1})),this.$emit("update:modelValue",this.nodeConfig)},addConditionList(){this.form.conditionList.push({label:"",field:"",operator:"=",value:""})},deleteConditionList(e){this.form.conditionList.splice(e,1)},toText(e,o){var{conditionList:t}=e.conditionNodes[o];if(t&&1==t.length){const e=t.map((e=>`${e.label}${e.operator}${e.value}`)).join(" 和 ");return e}if(t&&t.length>1){const l=1==e.conditionNodes[o].conditionMode?"且行":"或行";return t.length+"个条件，"+l}return o==e.conditionNodes.length-1&&"其他条件进入此流程"}}};const Ke=(0,Q.Z)(Ie,[["render",Fe]]);var Je=Ke;const Ze={class:"node-wrap"},Ge={class:"title",style:{background:"#3296fa"}},He={class:"content"},Ae={key:0},qe={key:1,class:"placeholder"},We={class:"node-wrap-drawer__title"},Qe=(0,l.createTextVNode)("选择人员"),Xe={class:"tags-list"},Ye=(0,l.createTextVNode)("保存"),eo=(0,l.createTextVNode)("取消");function oo(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-icon-promotion"),i=(0,l.resolveComponent)("el-icon"),s=(0,l.resolveComponent)("el-icon-close"),c=(0,l.resolveComponent)("add-node"),m=(0,l.resolveComponent)("el-icon-edit"),p=(0,l.resolveComponent)("el-input"),u=(0,l.resolveComponent)("el-button"),h=(0,l.resolveComponent)("el-tag"),V=(0,l.resolveComponent)("el-form-item"),C=(0,l.resolveComponent)("el-checkbox"),N=(0,l.resolveComponent)("el-form"),f=(0,l.resolveComponent)("el-main"),k=(0,l.resolveComponent)("el-footer"),g=(0,l.resolveComponent)("el-container"),v=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Ze,[(0,l.createElementVNode)("div",{class:"node-wrap-box",onClick:o[1]||(o[1]=(...e)=>a.show&&a.show(...e))},[(0,l.createElementVNode)("div",Ge,[(0,l.createVNode)(i,{class:"icon"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r)])),_:1}),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.nodeConfig.nodeName),1),(0,l.createVNode)(i,{class:"close",onClick:o[0]||(o[0]=(0,l.withModifiers)((e=>a.delNode()),["stop"]))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s)])),_:1})]),(0,l.createElementVNode)("div",He,[a.toText(n.nodeConfig)?((0,l.openBlock)(),(0,l.createElementBlock)("span",Ae,(0,l.toDisplayString)(a.toText(n.nodeConfig)),1)):((0,l.openBlock)(),(0,l.createElementBlock)("span",qe,"请选择人员"))])]),(0,l.createVNode)(c,{modelValue:n.nodeConfig.childNode,"onUpdate:modelValue":o[2]||(o[2]=e=>n.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,l.createVNode)(v,{title:"抄送人设置",modelValue:n.drawer,"onUpdate:modelValue":o[8]||(o[8]=e=>n.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",We,[n.isEditTitle?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("label",{key:0,onClick:o[3]||(o[3]=(...e)=>a.editTitle&&a.editTitle(...e))},[(0,l.createTextVNode)((0,l.toDisplayString)(n.form.nodeName),1),(0,l.createVNode)(i,{class:"node-wrap-drawer__title-edit"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m)])),_:1})])),n.isEditTitle?((0,l.openBlock)(),(0,l.createBlock)(p,{key:1,ref:"nodeTitle",modelValue:n.form.nodeName,"onUpdate:modelValue":o[4]||(o[4]=e=>n.form.nodeName=e),clearable:"",onBlur:a.saveTitle,onKeyup:(0,l.withKeys)(a.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,l.createCommentVNode)("",!0)])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(g,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(f,{style:{padding:"0 20px 20px 20px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(N,{"label-position":"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(V,{label:"选择要抄送的人员"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{type:"primary",icon:"el-icon-plus",round:"",onClick:o[5]||(o[5]=e=>a.selectHandle(1,n.form.nodeUserList))},{default:(0,l.withCtx)((()=>[Qe])),_:1}),(0,l.createElementVNode)("div",Xe,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.form.nodeUserList,((e,o)=>((0,l.openBlock)(),(0,l.createBlock)(h,{key:e.id,closable:"",onClose:e=>a.delUser(o)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),(0,l.createVNode)(V,{label:""},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{modelValue:n.form.userSelectFlag,"onUpdate:modelValue":o[6]||(o[6]=e=>n.form.userSelectFlag=e),label:"允许发起人自选抄送人"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.createVNode)(k,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(u,{type:"primary",onClick:a.save},{default:(0,l.withCtx)((()=>[Ye])),_:1},8,["onClick"]),(0,l.createVNode)(u,{onClick:o[7]||(o[7]=e=>n.drawer=!1)},{default:(0,l.withCtx)((()=>[eo])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var to={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:Y},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},selectHandle(e,o){this.select(e,o)},toText(e){if(e.nodeUserList&&e.nodeUserList.length>0){const o=e.nodeUserList.map((e=>e.name)).join("、");return o}return!!e.userSelectFlag&&"发起人自选"}}};const lo=(0,Q.Z)(to,[["render",oo]]);var no=lo,ao={props:{modelValue:{type:Object,default:()=>{}}},components:{approver:te,promoter:he,branch:Je,send:no},data(){return{nodeConfig:{}}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){this.nodeConfig=this.modelValue},methods:{}};const ro=(0,Q.Z)(ao,[["render",m]]);var io=ro;const so={key:0,class:"sc-user-select"},co={class:"sc-user-select__left"},mo={class:"sc-user-select__search"},po={class:"sc-user-select__select"},uo={class:"sc-user-select__tree"},ho={class:"sc-user-select__user"},Vo={class:"sc-user-select__user__list"},Co={class:"sc-user-select__toicon"},No={class:"sc-user-select__selected"},fo={class:"name"},ko={class:"delete"},go={key:1,class:"sc-user-select sc-user-select-role"},vo={class:"sc-user-select__left"},wo={class:"sc-user-select__select"},yo={class:"sc-user-select__tree"},xo={class:"sc-user-select__toicon"},_o={class:"sc-user-select__selected"},bo={class:"name"},To={class:"delete"},Bo=(0,l.createTextVNode)("取 消"),Eo=(0,l.createTextVNode)("确 认");function Uo(e,o,t,d,n,a){const r=(0,l.resolveComponent)("el-button"),i=(0,l.resolveComponent)("el-input"),s=(0,l.resolveComponent)("el-tree"),c=(0,l.resolveComponent)("el-scrollbar"),m=(0,l.resolveComponent)("el-pagination"),p=(0,l.resolveComponent)("el-icon-arrow-right"),u=(0,l.resolveComponent)("el-icon"),h=(0,l.resolveComponent)("el-avatar"),V=(0,l.resolveComponent)("el-dialog"),C=(0,l.resolveDirective)("loading");return(0,l.openBlock)(),(0,l.createBlock)(V,{modelValue:n.dialogVisible,"onUpdate:modelValue":o[3]||(o[3]=e=>n.dialogVisible=e),title:n.titleMap[n.type-1],width:1==n.type?680:460,"destroy-on-close":"","append-to-body":"",onClosed:o[4]||(o[4]=o=>e.$emit("closed"))},{footer:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{onClick:o[2]||(o[2]=e=>n.dialogVisible=!1)},{default:(0,l.withCtx)((()=>[Bo])),_:1}),(0,l.createVNode)(r,{type:"primary",onClick:a.save},{default:(0,l.withCtx)((()=>[Eo])),_:1},8,["onClick"])])),default:(0,l.withCtx)((()=>[1==n.type?((0,l.openBlock)(),(0,l.createElementBlock)("div",so,[(0,l.createElementVNode)("div",co,[(0,l.createElementVNode)("div",mo,[(0,l.createVNode)(i,{modelValue:n.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>n.keyword=e),"prefix-icon":"el-icon-search",placeholder:"搜索成员"},{append:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{icon:"el-icon-search",onClick:a.search},null,8,["onClick"])])),_:1},8,["modelValue"])]),(0,l.createElementVNode)("div",po,[(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("div",uo,[(0,l.createVNode)(c,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{class:"menu",ref:"groupTree",data:n.group,"node-key":n.groupProps.key,props:n.groupProps,"highlight-current":"","expand-on-click-node":!1,"current-node-key":n.groupId,onNodeClick:a.groupClick},null,8,["data","node-key","props","current-node-key","onNodeClick"])])),_:1})])),[[C,n.showGrouploading]]),(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("div",ho,[(0,l.createElementVNode)("div",Vo,[(0,l.createVNode)(c,{ref:"userScrollbar"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{class:"menu",ref:"userTree",data:n.user,"node-key":n.userProps.key,props:n.userProps,"default-checked-keys":a.selectedIds,"show-checkbox":"","check-on-click-node":"",onCheckChange:a.userClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1},512)]),(0,l.createElementVNode)("footer",null,[(0,l.createVNode)(m,{background:"",layout:"prev,next",small:"",total:n.total,"page-size":n.pageSize,currentPage:n.currentPage,"onUpdate:currentPage":o[1]||(o[1]=e=>n.currentPage=e),onCurrentChange:a.paginationChange},null,8,["total","page-size","currentPage","onCurrentChange"])])])),[[C,n.showUserloading]])])]),(0,l.createElementVNode)("div",Co,[(0,l.createVNode)(u,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(p)])),_:1})]),(0,l.createElementVNode)("div",No,[(0,l.createElementVNode)("header",null,"已选 ("+(0,l.toDisplayString)(n.selected.length)+")",1),(0,l.createElementVNode)("ul",null,[(0,l.createVNode)(c,null,{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.selected,((e,o)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:e.id},[(0,l.createElementVNode)("span",fo,[(0,l.createVNode)(h,{size:"small"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.name.substring(0,1)),1)])),_:2},1024),(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(e.name),1)]),(0,l.createElementVNode)("span",ko,[(0,l.createVNode)(r,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(o)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,l.createCommentVNode)("",!0),2==n.type?((0,l.openBlock)(),(0,l.createElementBlock)("div",go,[(0,l.createElementVNode)("div",vo,[(0,l.createElementVNode)("div",wo,[(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("div",yo,[(0,l.createVNode)(c,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(s,{class:"menu",ref:"groupTree",data:n.role,"node-key":n.roleProps.key,props:n.roleProps,"show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-checked-keys":a.selectedIds,onCheckChange:a.roleClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1})])),[[C,n.showGrouploading]])])]),(0,l.createElementVNode)("div",xo,[(0,l.createVNode)(u,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(p)])),_:1})]),(0,l.createElementVNode)("div",_o,[(0,l.createElementVNode)("header",null,"已选 ("+(0,l.toDisplayString)(n.selected.length)+")",1),(0,l.createElementVNode)("ul",null,[(0,l.createVNode)(c,null,{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.selected,((e,o)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:e.id},[(0,l.createElementVNode)("span",bo,[(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(e.name),1)]),(0,l.createElementVNode)("span",To,[(0,l.createVNode)(r,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>a.deleteSelected(o)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,l.createCommentVNode)("",!0)])),_:1},8,["modelValue","title","width"])}var Lo=t(7877),So={successCode:200,group:{apiObj:Lo.Z.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}},user:{apiObj:Lo.Z.demo.page,pageSize:20,parseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},props:{key:"id",label:"user"},request:{page:"page",pageSize:"pageSize",groupId:"groupId",keyword:"keyword"}},role:{apiObj:Lo.Z.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}}},Do={props:{modelValue:{type:Boolean,default:!1}},data(){return{groupProps:So.group.props,userProps:So.user.props,roleProps:So.role.props,titleMap:["人员选择","角色选择"],dialogVisible:!1,showGrouploading:!1,showUserloading:!1,keyword:"",groupId:"",pageSize:So.user.pageSize,total:0,currentPage:1,group:[],user:[],role:[],type:1,selected:[],value:[]}},computed:{selectedIds(){return this.selected.map((e=>e.id))}},mounted(){},methods:{open(e,o){this.type=e,this.value=o||[],this.selected=JSON.parse(JSON.stringify(o||[])),this.dialogVisible=!0,1==this.type?(this.getGroup(),this.getUser()):2==this.type&&this.getRole()},async getGroup(){this.showGrouploading=!0;var e=await So.group.apiObj.get();this.showGrouploading=!1;var o={[So.group.props.key]:"",[So.group.props.label]:"所有"};e.data.unshift(o),this.group=So.group.parseData(e).rows},async getUser(){this.showUserloading=!0;var e={[So.user.request.keyword]:this.keyword||null,[So.user.request.groupId]:this.groupId||null,[So.user.request.page]:this.currentPage,[So.user.request.pageSize]:this.pageSize},o=await So.user.apiObj.get(e);this.showUserloading=!1,this.user=So.user.parseData(o).rows,this.total=So.user.parseData(o).total||0,this.$refs.userScrollbar.setScrollTop(0)},async getRole(){this.showGrouploading=!0;var e=await So.role.apiObj.get();this.showGrouploading=!1,this.role=So.role.parseData(e).rows},groupClick(e){this.keyword="",this.currentPage=1,this.groupId=e[So.group.props.key],this.getUser()},userClick(e,o){o?this.selected.push({id:e[So.user.props.key],name:e[So.user.props.label]}):this.selected=this.selected.filter((o=>o.id!=e[So.user.props.key]))},paginationChange(){this.getUser()},search(){this.groupId="",this.$refs.groupTree.setCurrentKey(this.groupId),this.currentPage=1,this.getUser()},deleteSelected(e){this.selected.splice(e,1),1==this.type?this.$refs.userTree.setCheckedKeys(this.selectedIds):2==this.type&&this.$refs.groupTree.setCheckedKeys(this.selectedIds)},roleClick(e,o){o?this.selected.push({id:e[So.role.props.key],name:e[So.role.props.label]}):this.selected=this.selected.filter((o=>o.id!=e[So.role.props.key]))},save(){this.value.splice(0,this.value.length),this.selected.map((e=>{this.value.push(e)})),this.dialogVisible=!1}}};const Mo=(0,Q.Z)(Do,[["render",Uo],["__scopeId","data-v-e3061d58"]]);var $o=Mo,Oo={provide(){return{select:this.selectHandle}},props:{modelValue:{type:Object,default:()=>{}}},components:{nodeWrap:io,useSelect:$o},data(){return{nodeConfig:this.modelValue,selectVisible:!1}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){},methods:{selectHandle(e,o){this.selectVisible=!0,this.$nextTick((()=>{this.$refs.useselect.open(e,o)}))}}};const Ro=(0,Q.Z)(Oo,[["render",c]]);var jo=Ro,Po={name:"workflow",components:{scWorkflow:jo},data(){return{data:{id:1,name:"请假审批",nodeConfig:{nodeName:"发起人",type:0,nodeRoleList:[],childNode:{nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"长期",type:3,priorityLevel:1,conditionMode:1,conditionList:[{label:"请假天数",field:"day",operator:">",value:"7"}],childNode:{nodeName:"领导审批",type:1,setType:1,nodeUserList:[{id:"360000197302144442",name:"何敏"}],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}},{nodeName:"短期",type:3,priorityLevel:2,conditionMode:1,conditionList:[],childNode:{nodeName:"直接主管审批",type:1,setType:2,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0}}],childNode:{nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[{id:"220000200908305857",name:"何秀英"}]}}}}}},mounted(){},methods:{exportJson(){this.$message("返回值请查看F12控制台console.log()"),console.log(this.data)}}};const zo=(0,Q.Z)(Po,[["render",a]]);var Fo=zo}}]);