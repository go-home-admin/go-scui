"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4058],{70379:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var l=o(58222);const a=(0,l.createElementVNode)("div",{class:"el-form-item-msg"},"请输入注册时填写的登录账号",-1),r={class:"yzm"},s=(0,l.createTextVNode)("获取验证码"),d={key:0},n=(0,l.createElementVNode)("div",{class:"el-form-item-msg"},"请输入包含英文、数字的8位以上密码",-1),i=(0,l.createTextVNode)("提交"),m=(0,l.createTextVNode)("返回登录");function c(e,t,o,c,u,p){const h=(0,l.resolveComponent)("el-step"),f=(0,l.resolveComponent)("el-steps"),w=(0,l.resolveComponent)("el-input"),V=(0,l.resolveComponent)("el-form-item"),C=(0,l.resolveComponent)("el-button"),v=(0,l.resolveComponent)("el-form"),N=(0,l.resolveComponent)("el-result"),k=(0,l.resolveComponent)("common-page");return(0,l.openBlock)(),(0,l.createBlock)(k,{title:"重置密码"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(f,{active:u.stepActive,simple:"","finish-status":"success"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(h,{title:"填写新密码"}),(0,l.createVNode)(h,{title:"完成重置"})])),_:1},8,["active"]),0==u.stepActive?((0,l.openBlock)(),(0,l.createBlock)(v,{key:0,ref:"form",model:u.form,rules:u.rules,"label-width":120},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(V,{label:"登录账号",prop:"user"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(w,{modelValue:u.form.user,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.user=e),placeholder:"请输入登录账号"},null,8,["modelValue"]),a])),_:1}),(0,l.createVNode)(V,{label:"手机号码",prop:"phone"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(w,{modelValue:u.form.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(V,{label:"短信验证码",prop:"yzm"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",r,[(0,l.createVNode)(w,{modelValue:u.form.yzm,"onUpdate:modelValue":t[2]||(t[2]=e=>u.form.yzm=e),placeholder:"请输入6位短信验证码"},null,8,["modelValue"]),(0,l.createVNode)(C,{onClick:p.getYzm,disabled:u.disabled},{default:(0,l.withCtx)((()=>[s,u.disabled?((0,l.openBlock)(),(0,l.createElementBlock)("span",d," ("+(0,l.toDisplayString)(u.time)+")",1)):(0,l.createCommentVNode)("",!0)])),_:1},8,["onClick","disabled"])])])),_:1}),(0,l.createVNode)(V,{label:"新密码",prop:"newpw"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(w,{modelValue:u.form.newpw,"onUpdate:modelValue":t[3]||(t[3]=e=>u.form.newpw=e),"show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"]),n])),_:1}),(0,l.createVNode)(V,{label:"确认新密码",prop:"newpw2"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(w,{modelValue:u.form.newpw2,"onUpdate:modelValue":t[4]||(t[4]=e=>u.form.newpw2=e),"show-password":"",placeholder:"请再一次输入新密码"},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(V,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{type:"primary",onClick:p.save},{default:(0,l.withCtx)((()=>[i])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])):(0,l.createCommentVNode)("",!0),1==u.stepActive?((0,l.openBlock)(),(0,l.createBlock)(N,{key:1,icon:"success",title:"密码重置成功","sub-title":"请牢记自己的新密码,返回登录后使用新密码登录"},{extra:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{type:"primary",onClick:p.backLogin},{default:(0,l.withCtx)((()=>[m])),_:1},8,["onClick"])])),_:1})):(0,l.createCommentVNode)("",!0)])),_:1})}o(21703);var u=o(57973),p={components:{commonPage:u["default"]},data(){return{stepActive:0,form:{user:"",phone:"",yzm:"",newpw:"",newpw2:""},rules:{user:[{required:!0,message:"请输入登录账号"}],phone:[{required:!0,message:"请输入手机号"}],yzm:[{required:!0,message:"请输入短信验证码"}],newpw:[{required:!0,message:"请输入新的密码"}],newpw2:[{required:!0,message:"请再次输入新的密码"},{validator:(e,t,o)=>{t!==this.form.newpw?o(new Error("两次输入密码不一致")):o()}}]},disabled:!1,time:0}},mounted(){},methods:{async getYzm(){var e=await this.$refs.form.validateField("phone").catch((()=>{}));if(!e)return!1;this.$message.success("已发送短信至手机号码"),this.disabled=!0,this.time=60;var t=setInterval((()=>{this.time-=1,this.time<1&&(clearInterval(t),this.disabled=!1,this.time=0)}),1e3)},async save(){var e=await this.$refs.form.validate().catch((()=>{}));if(!e)return!1;this.stepActive=1},backLogin(){this.$router.push({path:"/login"})}}},h=o(83744);const f=(0,h.Z)(p,[["render",c]]);var w=f}}]);