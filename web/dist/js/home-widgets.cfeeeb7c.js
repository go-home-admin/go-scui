"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[5642,2674,4281,1711,390,229],{21241:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});var l=o(58222);const i=e=>((0,l.pushScopeId)("data-v-098df000"),e=e(),(0,l.popScopeId)(),e),s={class:"widgets-content"},a={class:"widgets-top"},n=i((()=>(0,l.createElementVNode)("div",{class:"widgets-top-title"}," 控制台 ",-1))),c={class:"widgets-top-actions"},r=(0,l.createTextVNode)("完成"),d=(0,l.createTextVNode)("自定义"),m={class:"widgets",ref:"widgets"},u={class:"widgets-wrapper"},p={key:0,class:"no-widgets"},g={class:"widgets-item"},h={key:0,class:"customize-overlay"},C={key:0,class:"widgets-aside"},f={class:"widgets-aside-title"},N=(0,l.createTextVNode)("添加部件"),V={class:"selectLayout"},k=i((()=>(0,l.createElementVNode)("span",null,null,-1))),v=i((()=>(0,l.createElementVNode)("span",null,null,-1))),y=i((()=>(0,l.createElementVNode)("span",null,null,-1))),w=i((()=>(0,l.createElementVNode)("span",null,null,-1))),E=i((()=>(0,l.createElementVNode)("span",null,null,-1))),x=i((()=>(0,l.createElementVNode)("span",null,null,-1))),L=i((()=>(0,l.createElementVNode)("span",null,null,-1))),_=i((()=>(0,l.createElementVNode)("span",null,null,-1))),B=i((()=>(0,l.createElementVNode)("span",null,null,-1))),z={class:"widgets-list"},b={key:0,class:"widgets-list-nodata"},$={class:"item-logo"},O={class:"item-info"},D={class:"item-actions"},T=(0,l.createTextVNode)("恢复默认");function S(e,t,o,i,S,G){const I=(0,l.resolveComponent)("el-button"),j=(0,l.resolveComponent)("el-empty"),F=(0,l.resolveComponent)("el-icon"),J=(0,l.resolveComponent)("draggable"),P=(0,l.resolveComponent)("el-col"),U=(0,l.resolveComponent)("el-row"),W=(0,l.resolveComponent)("el-icon-circle-plus-filled"),A=(0,l.resolveComponent)("el-icon-close"),R=(0,l.resolveComponent)("el-header"),Z=(0,l.resolveComponent)("el-main"),q=(0,l.resolveComponent)("el-footer"),H=(0,l.resolveComponent)("el-container");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["widgets-home",S.customizing?"customizing":""]),ref:"main"},[(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("div",a,[n,(0,l.createElementVNode)("div",c,[S.customizing?((0,l.openBlock)(),(0,l.createBlock)(I,{key:0,type:"primary",icon:"el-icon-check",round:"",onClick:G.save},{default:(0,l.withCtx)((()=>[r])),_:1},8,["onClick"])):((0,l.openBlock)(),(0,l.createBlock)(I,{key:1,type:"primary",icon:"el-icon-edit",round:"",onClick:G.custom},{default:(0,l.withCtx)((()=>[d])),_:1},8,["onClick"]))])]),(0,l.createElementVNode)("div",m,[(0,l.createElementVNode)("div",u,[G.nowCompsList.length<=0?((0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createVNode)(j,{image:"img/no-widgets.svg",description:"没有部件啦","image-size":280})])):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(U,{gutter:15},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(S.grid.layout,((e,t)=>((0,l.openBlock)(),(0,l.createBlock)(P,{key:t,md:e,xs:24},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(J,{modelValue:S.grid.copmsList[t],"onUpdate:modelValue":e=>S.grid.copmsList[t]=e,animation:"200",handle:".customize-overlay",group:"people","item-key":"com",dragClass:"aaaaa","force-fallback":"",fallbackOnBody:"",class:"draggable-box"},{item:(0,l.withCtx)((({element:e})=>[(0,l.createElementVNode)("div",g,[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(S.allComps[e]))),S.customizing?((0,l.openBlock)(),(0,l.createElementBlock)("div",h,[(0,l.createVNode)(I,{class:"close",type:"danger",plain:"",icon:"el-icon-close",size:"small",onClick:t=>G.remove(e)},null,8,["onClick"]),(0,l.createElementVNode)("label",null,[(0,l.createVNode)(F,null,{default:(0,l.withCtx)((()=>[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(S.allComps[e].icon)))])),_:2},1024),(0,l.createTextVNode)((0,l.toDisplayString)(S.allComps[e].title),1)])])):(0,l.createCommentVNode)("",!0)])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["md"])))),128))])),_:1})])],512)]),S.customizing?((0,l.openBlock)(),(0,l.createElementBlock)("div",C,[(0,l.createVNode)(H,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(R,null,{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",f,[(0,l.createVNode)(F,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(W)])),_:1}),N]),(0,l.createElementVNode)("div",{class:"widgets-aside-close",onClick:t[0]||(t[0]=e=>G.close())},[(0,l.createVNode)(F,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(A)])),_:1})])])),_:1}),(0,l.createVNode)(R,{style:{height:"auto"}},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",V,[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["selectLayout-item item01",{active:"12,6,6"==S.grid.layout.join(",")}]),onClick:t[1]||(t[1]=e=>G.setLayout([12,6,6]))},[(0,l.createVNode)(U,{gutter:2},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(P,{span:12},{default:(0,l.withCtx)((()=>[k])),_:1}),(0,l.createVNode)(P,{span:6},{default:(0,l.withCtx)((()=>[v])),_:1}),(0,l.createVNode)(P,{span:6},{default:(0,l.withCtx)((()=>[y])),_:1})])),_:1})],2),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["selectLayout-item item02",{active:"24,16,8"==S.grid.layout.join(",")}]),onClick:t[2]||(t[2]=e=>G.setLayout([24,16,8]))},[(0,l.createVNode)(U,{gutter:2},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(P,{span:24},{default:(0,l.withCtx)((()=>[w])),_:1}),(0,l.createVNode)(P,{span:16},{default:(0,l.withCtx)((()=>[E])),_:1}),(0,l.createVNode)(P,{span:8},{default:(0,l.withCtx)((()=>[x])),_:1})])),_:1})],2),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["selectLayout-item item03",{active:"24"==S.grid.layout.join(",")}]),onClick:t[3]||(t[3]=e=>G.setLayout([24]))},[(0,l.createVNode)(U,{gutter:2},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(P,{span:24},{default:(0,l.withCtx)((()=>[L])),_:1}),(0,l.createVNode)(P,{span:24},{default:(0,l.withCtx)((()=>[_])),_:1}),(0,l.createVNode)(P,{span:24},{default:(0,l.withCtx)((()=>[B])),_:1})])),_:1})],2)])])),_:1}),(0,l.createVNode)(Z,{class:"nopadding"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",z,[G.myCompsList.length<=0?((0,l.openBlock)(),(0,l.createElementBlock)("div",b,[(0,l.createVNode)(j,{description:"没有部件啦","image-size":60})])):(0,l.createCommentVNode)("",!0),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(G.myCompsList,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:e.title,class:"widgets-list-item"},[(0,l.createElementVNode)("div",$,[(0,l.createVNode)(F,null,{default:(0,l.withCtx)((()=>[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(e.icon)))])),_:2},1024)]),(0,l.createElementVNode)("div",O,[(0,l.createElementVNode)("h2",null,(0,l.toDisplayString)(e.title),1),(0,l.createElementVNode)("p",null,(0,l.toDisplayString)(e.description),1)]),(0,l.createElementVNode)("div",D,[(0,l.createVNode)(I,{type:"primary",icon:"el-icon-plus",size:"small",onClick:t=>G.push(e)},null,8,["onClick"])])])))),128))])])),_:1}),(0,l.createVNode)(q,{style:{height:"51px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(I,{size:"small",onClick:t[4]||(t[4]=e=>G.backDefaul())},{default:(0,l.withCtx)((()=>[T])),_:1})])),_:1})])),_:1})])):(0,l.createCommentVNode)("",!0)],2)}var G=o(9980),I=o.n(G),j=o(12856),F={components:{draggable:I()},data(){return{customizing:!1,allComps:j["default"],selectLayout:[],defaultGrid:this.$CONFIG.DEFAULT_GRID,grid:[]}},created(){this.grid=this.$TOOL.data.get("grid")||JSON.parse(JSON.stringify(this.defaultGrid))},mounted(){this.$emit("on-mounted")},computed:{allCompsList(){var e=[];for(var t in this.allComps)e.push({key:t,title:j["default"][t].title,icon:j["default"][t].icon,description:j["default"][t].description});var o=this.grid.copmsList.reduce((function(e,t){return e.concat(t)}));for(let l of e){const e=o.find((e=>e===l.key));e&&(l.disabled=!0)}return e},myCompsList(){return this.allCompsList.filter((e=>!e.disabled))},nowCompsList(){return this.grid.copmsList.reduce((function(e,t){return e.concat(t)}))}},methods:{custom(){this.customizing=!0;const e=this.$refs.widgets.offsetWidth;this.$nextTick((()=>{const t=this.$refs.widgets.offsetWidth/e;this.$refs.widgets.style.setProperty("transform",`scale(${t})`)}))},setLayout(e){this.grid.layout=e,"24"==e.join(",")&&(this.grid.copmsList[0]=[...this.grid.copmsList[0],...this.grid.copmsList[1],...this.grid.copmsList[2]],this.grid.copmsList[1]=[],this.grid.copmsList[2]=[])},push(e){let t=this.grid.copmsList[0];t.push(e.key)},remove(e){var t=this.grid.copmsList;t.forEach(((o,l)=>{var i=o.filter((t=>t!=e));t[l]=i}))},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set("grid",this.grid)},backDefaul(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove("grid")},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform")}}},J=o(83744);const P=(0,J.Z)(F,[["render",S],["__scopeId","data-v-098df000"]]);var U=P}}]);