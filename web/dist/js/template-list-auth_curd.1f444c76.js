"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[2321],{76539:function(e,t,o){o.r(t),o.d(t,{default:function(){return f}});var a=o(58222);const l={class:"left-panel"},i=(0,a.createTextVNode)("页面新增"),n=(0,a.createTextVNode)("查看"),s=(0,a.createTextVNode)("编辑"),r=(0,a.createTextVNode)("页面编辑"),d=(0,a.createTextVNode)("删除");function c(e,t,o,c,p,h){const u=(0,a.resolveComponent)("el-button"),m=(0,a.resolveComponent)("el-header"),C=(0,a.resolveComponent)("el-table-column"),f=(0,a.resolveComponent)("sc-status-indicator"),g=(0,a.resolveComponent)("el-popconfirm"),w=(0,a.resolveComponent)("scTable"),b=(0,a.resolveComponent)("el-main"),V=(0,a.resolveComponent)("el-container"),v=(0,a.resolveComponent)("save-dialog"),k=(0,a.resolveComponent)("info"),N=(0,a.resolveComponent)("el-drawer");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(u,{type:"primary",icon:"el-icon-plus",onClick:h.add},null,8,["onClick"]),(0,a.createVNode)(u,{type:"primary",icon:"el-icon-plus",onClick:h.addPage},{default:(0,a.withCtx)((()=>[i])),_:1},8,["onClick"]),(0,a.createVNode)(u,{type:"danger",plain:"",icon:"el-icon-delete",disabled:0==p.selection.length,onClick:h.batch_del},null,8,["disabled","onClick"])])])),_:1}),(0,a.createVNode)(b,{class:"nopadding"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{ref:"table",apiObj:p.list.apiObj,"row-key":"id",onSelectionChange:h.selectionChange,stripe:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{type:"selection",width:"50"}),(0,a.createVNode)(C,{label:"姓名",prop:"name",width:"180"}),(0,a.createVNode)(C,{label:"性别",prop:"sex",width:"150"}),(0,a.createVNode)(C,{label:"邮箱",prop:"email",width:"250"}),(0,a.createVNode)(C,{label:"状态",prop:"boolean",width:"60"},{default:(0,a.withCtx)((e=>[e.row.boolean?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,type:"success"})):(0,a.createCommentVNode)("",!0),e.row.boolean?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(f,{key:1,pulse:"",type:"danger"}))])),_:1}),(0,a.createVNode)(C,{label:"评分",prop:"num",width:"150"}),(0,a.createVNode)(C,{label:"操作",fixed:"right",align:"right",width:"300"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(u,{plain:"",size:"small",onClick:t=>h.table_show(e.row)},{default:(0,a.withCtx)((()=>[n])),_:2},1032,["onClick"]),(0,a.createVNode)(u,{type:"primary",plain:"",size:"small",onClick:t=>h.table_edit(e.row)},{default:(0,a.withCtx)((()=>[s])),_:2},1032,["onClick"]),(0,a.createVNode)(u,{type:"primary",plain:"",size:"small",onClick:t=>h.table_edit_page(e.row)},{default:(0,a.withCtx)((()=>[r])),_:2},1032,["onClick"]),(0,a.createVNode)(g,{title:"确定删除吗？",onConfirm:t=>h.table_del(e.row,e.$index)},{reference:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{plain:"",type:"danger",size:"small"},{default:(0,a.withCtx)((()=>[d])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["apiObj","onSelectionChange"])])),_:1})])),_:1}),p.dialog.save?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,ref:"saveDialog",onSuccess:h.handleSaveSuccess,onClosed:t[0]||(t[0]=e=>p.dialog.save=!1)},null,8,["onSuccess"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(N,{modelValue:p.dialog.info,"onUpdate:modelValue":t[1]||(t[1]=e=>p.dialog.info=e),size:800,title:"详细","custom-class":"drawerBG",direction:"rtl","destroy-on-close":""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{ref:"infoDialog"},null,512)])),_:1},8,["modelValue"])],64)}var p=o(7802),h=o(55497),u={name:"listCrud",components:{saveDialog:p["default"],info:h["default"]},data(){return{dialog:{save:!1,info:!1},list:{apiObj:this.$API.demo.list},selection:[]}},mounted(){},methods:{add(){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open()}))},table_edit(e){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open("edit").setData(e)}))},addPage(){this.$router.push({path:"/template/list/crud/detail"})},table_edit_page(e){this.$router.push({path:"/template/list/crud/detail",query:{id:e.id}})},table_show(e){this.dialog.info=!0,this.$nextTick((()=>{this.$refs.infoDialog.setData(e)}))},async table_del(e,t){var o={id:e.id},a=await this.$API.demo.post.post(o);200==a.code?(this.$refs.table.removeIndex(t),this.$message.success("删除成功")):this.$alert(a.message,"提示",{type:"error"})},async batch_del(){var e=await this.$confirm(`确定删除选中的 ${this.selection.length} 项吗？`,"提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((()=>{}));if(!e)return!1;var t=this.selection.map((e=>e.id));this.$refs.table.removeKeys(t),this.$message.success("操作成功")},selectionChange(e){this.selection=e},handleSaveSuccess(e,t){"add"==t?this.$refs.table.unshiftRow(e):"edit"==t&&this.$refs.table.updateKey(e)}}},m=o(83744);const C=(0,m.Z)(u,[["render",c]]);var f=C}}]);